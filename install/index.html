<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://olc-bioinformatics.github.io/ConFindr/install/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Installation - ConFindr</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Installation";
        var mkdocs_page_input_path = "install.md";
        var mkdocs_page_url = "/ConFindr/install/";
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> ConFindr
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Installation</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#system-requirements">System Requirements</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#downloading-confindr-databases">Downloading ConFindr Databases</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#installing-using-conda-recommended">Installing Using Conda (Recommended)</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#manual-installation">Manual Installation</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#executable">Executable</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#dependencies">Dependencies</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../usage/">Usage</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">ConFindr</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li>Installation</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/OLC-Bioinformatics/ConFindr/edit/master/docs/install.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="installation">Installation</h1>
<h2 id="system-requirements">System Requirements</h2>
<p>ConFindr has been tested with Debian-based Linux systems, 
but should in principle work on any flavour of Linux, as well as MacOSX. 
Windows isn't supported, but it may very well be installable via bioconda. If you have any success running
ConFindr on a Windows machine, let me know!</p>
<p>ConFindr should run on any regular desktop/laptop with 8 GB or RAM or more.</p>
<h2 id="downloading-confindr-databases">Downloading ConFindr Databases</h2>
<p>As of ConFindr 0.7.0, databases for detecting contamination in <em>Escherichia</em>, <em>Listeria</em>, and <em>Salmonella</em> derived from
core-gene schemes are freely available and will be automatically downloaded by ConFindr when it runs. If you only want 
to run ConFindr on these three genera, nothing further is necessary. If you want to run ConFindr on any other genera, keep
reading on how to get access to the necessary databases.</p>
<p>ConFindr uses the ribosomal multi-locus sequence typing (rMLST) scheme to detect contamination in genera other 
than the ones listed above. These databases are available free for academic use, but you will need to jump through a few 
hoops before you can get access to them due to an associated <a href="https://pubmlst.org/rmlst/rMLST_licence.pdf">licence agreement</a>.
Non-academic use will require a commercial licence.</p>
<p>Here are the steps to getting databases downloaded:</p>
<ol>
<li>
<p>Register for a PubMLST account if you do not already have one. Link to register is <a href="https://pubmlst.org/bigsdb">here</a>. 
Click on <code>Register for a site-wide account.</code></p>
</li>
<li>
<p>Log in to your account at <a href="https://pubmlst.org/bigsdb">https://pubmlst.org/bigsdb</a> and request access to 
Ribosomal MLST genome and Ribosomal MLST locus/sequence definitions under <code>Registrations</code>. Additionally, email Keith Jolley
(keith.jolley@zoo.ox.ac.uk) and request a consumer key and consumer secret so that you'll be able
to access the database programatically.</p>
</li>
<li>
<p>Once you've gotten your consumer key and consumer secret from Keith, put them into a text file
with the key on the first line and the secret on the second. It should look something like the below
snippet:</p>
</li>
</ol>
<pre><code>efKXmqp2D0EBlMBkZaGC2lPf
F$M+fQ2AFFB2YBDfF9fpHF^qSWJdmmN%L4Fxf5Gur3
</code></pre>
<ol>
<li>
<p>Install ConFindr as shown in the next section.</p>
</li>
<li>
<p>With ConFindr installed, use the command <code>confindr_database_setup</code> to have ConFindr download the latest version
of the rMLST databases. This script takes two arguments - a <code>-s</code> where you give the path to the text file containing your consumer 
key and secret, and a <code>-o</code> to specify where you want the sequences downloaded. Only the <code>-s</code> is mandatory. If your output
directory is not specified, ConFindr will first search for an environmental variable called <code>CONFINDR_DB</code>, and if it can't
find that it will automatically download to a folder called <code>.confindr_db</code> in your home directory.</p>
</li>
</ol>
<h2 id="installing-using-conda-recommended">Installing Using Conda (Recommended)</h2>
<ol>
<li>
<p>Follow the instructions <a href="https://bioconda.github.io/">here</a> to add the Bioconda channel to your list of conda channels, if it hasn't already been added.</p>
</li>
<li>
<p>Install ConFindr into a new conda environment named 'confindr':</p>
</li>
</ol>
<p><code>conda create -n confindr -c bioconda confindr=0.8.1</code></p>
<ol>
<li>Activate the new conda environment:</li>
</ol>
<p><code>conda activate confindr</code></p>
<p>Typing <code>confindr -h</code> into the command-line will show the help menu for the program. See the <a href="../usage/">Usage</a> section for instructions on how to use ConFindr, including a ConFindr run on an example dataset.</p>
<h2 id="manual-installation">Manual Installation</h2>
<h3 id="executable">Executable</h3>
<p>ConFindr can also be installed using <code>pip</code>. Use of a virtual environment for ConFindr is highly recommended. To create a virtualenv:</p>
<ol>
<li>Create an empty directory (i.e. <code>mkdir ~/Virtual_Environments/ConFindr</code>).</li>
<li>Virtualenv that directory (<code>virtualenv -p /usr/bin/python3 ~/Virtual_Environments/ConFindr</code>).</li>
<li>Activate the virtualenv (<code>source ~/Virtual_Environments/ConFindr/bin/activate</code>).</li>
<li>Install ConFindrâ€”this should also install any packages that ConFindr depends upon (<code>pip install confindr</code>).</li>
</ol>
<p>With this done, you'll need to make sure that any necessary dependencies are installed.</p>
<h3 id="dependencies">Dependencies</h3>
<p>Before using ConFindr when installed using <code>pip</code>, you'll need to download and add the following programs to your $PATH:</p>
<ul>
<li><a href="https://jgi.doe.gov/data-and-tools/bbtools/">BBMap (&gt;=39.01)</a></li>
<li><a href="https://github.com/marbl/Mash/releases">Mash (&gt;=2.3)</a></li>
<li><a href="https://bitbucket.org/genomicepidemiology/kma">KMA (&gt;=1.4.9)</a></li>
<li><a href="https://www.python.org/downloads/">Python (&gt;=3.9.15)</a></li>
<li><a href="https://github.com/samtools/samtools">SAMtools (&gt;=1.17)</a></li>
<li><a href="https://pypi.org/project/pysam/">pysam (&gt;=0.21.0)</a></li>
</ul>
<p>If you want to run ConFindr in Nanopore mode (<code>-dt Nanopore</code>), you'll also need to install <a href="https://github.com/lh3/minimap2">minimap2</a>.</p>
<p>Instructions on adding programs to your $PATH can be found <a href="https://stackoverflow.com/questions/14637979/how-to-permanently-set-path-on-linux-unix">here</a>.</p>
<p>If ConFindr can't find these dependencies when you try to run it, you will see an error message and the program will quit.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href=".." class="btn btn-neutral float-left" title="Home"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../usage/" class="btn btn-neutral float-right" title="Usage">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/OLC-Bioinformatics/ConFindr" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href=".." style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../usage/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
