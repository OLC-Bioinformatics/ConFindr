<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://olc-bioinformatics.github.io/ConFindr/install/">
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Installation - ConFindr</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/docco.min.css">

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">ConFindr</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href=".." class="nav-link">Home</a>
                            </li>
                            <li class="navitem active">
                                <a href="./" class="nav-link">Installation</a>
                            </li>
                            <li class="navitem">
                                <a href="../usage/" class="nav-link">Usage</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href=".." class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../usage/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/OLC-Bioinformatics/Confindr/edit/master/docs/install.md" class="nav-link"><i class="fa fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#system-requirements" class="nav-link">System Requirements</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#downloading-confindr-databases" class="nav-link">Downloading ConFindr Databases</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#installing-using-conda-recommended" class="nav-link">Installing Using Conda (Recommended)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#manual-install" class="nav-link">Manual Install</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="system-requirements">System Requirements</h1>
<p>ConFindr has been tested with Debian-based Linux systems, 
but should in principle work on any flavour of Linux, as well as MacOSX. 
Windows isn't supported, but it may very well be installable via bioconda. If you have any success running
ConFindr on a Windows machine, let me know!</p>
<p>ConFindr should run on any regular desktop/laptop with 8 GB or RAM or more.</p>
<h2 id="downloading-confindr-databases">Downloading ConFindr Databases</h2>
<p>As of ConFindr 0.7.0, databases for detecting contamination in <em>Escherichia</em>, <em>Listeria</em>, and <em>Salmonella</em> derived from
core-gene schemes are freely available and will be automatically downloaded by ConFindr when it runs. If you only want 
to run ConFindr on these three genera, nothing further is necessary. If you want to run ConFindr on any other genera, keep
reading on how to get access to the necessary databases.</p>
<p>ConFindr uses the ribosomal multi-locus sequence typing (rMLST) scheme to detect contamination in genera other 
than the ones listed above. These databases are available free for academic use, but you will need to jump through a few 
hoops before you can get access to them due to an associated <a href="https://pubmlst.org/rmlst/rMLST_licence.pdf">licence agreement</a>.
Non-academic use will require a commercial licence.</p>
<p>Here are the steps to getting databases downloaded:</p>
<ul>
<li>
<p>Register for a PubMLST account if you do not already have one. Link to register is <a href="https://pubmlst.org/bigsdb">here</a>. 
Click on <code>Register for a site-wide account.</code></p>
</li>
<li>
<p>Login to your account at <a href="https://pubmlst.org/bigsdb">https://pubmlst.org/bigsdb</a> and request access to 
Ribosomal MLST genome and Ribosomal MLST locus/sequence definitions under <code>Registrations</code>. Additionally, email Keith Jolley
(keith.jolley@zoo.ox.ac.uk) and request a consumer key and consumer secret so that you'll be able
to access the database programatically.</p>
</li>
<li>
<p>Once you've gotten your consumer key and consumer secret from Keith, put them into a text file
with the key on the first line and the secret on the second. It should look something like the below
snippet:</p>
</li>
</ul>
<pre><code>efKXmqp2D0EBlMBkZaGC2lPf
F$M+fQ2AFFB2YBDfF9fpHF^qSWJdmmN%L4Fxf5Gur3
</code></pre>
<ul>
<li>
<p>Install ConFindr as shown in the next section.</p>
</li>
<li>
<p>With ConFindr installed, use the command <code>confindr_database_setup</code> to have ConFindr download the latest version
of the rMLST databases. This script takes two arguments - a <code>-s</code> where you give the path to the text file containing your consumer 
key and secret, and a <code>-o</code> to specify where you want the sequences downloaded. Only the <code>-s</code> is mandatory. If your output
directory is not specified, ConFindr will first search for an environmental variable called <code>CONFINDR_DB</code>, and if it can't
find that it will automatically download to a folder called <code>.confindr_db</code> in your home directory.</p>
</li>
</ul>
<h2 id="installing-using-conda-recommended">Installing Using Conda (Recommended)</h2>
<p>ConFindr is available within bioconda - to get bioconda installed and running see instructions <a href="https://bioconda.github.io/">here</a>.</p>
<p>With bioconda running, you can install ConFindr with the following command:</p>
<p><code>conda install -c bioconda confindr</code></p>
<p>With that done, typing <code>confindr.py</code> will bring access the ConFindr pipeline. See the <a href="../usage/">Usage</a> section for instructions on how to use ConFindr, including a ConFindr run on an example dataset.</p>
<h2 id="manual-install">Manual Install</h2>
<h4 id="executable">Executable</h4>
<p>ConFindr can also be installed using pip. Use of a virtual environment for ConFindr is highly recommended. To create a virtualenv:</p>
<ul>
<li>Create an empty directory (i.e. <code>mkdir ~/Virtual_Environments/ConFindr</code>)</li>
<li>Virtualenv that directory (<code>virtualenv -p /usr/bin/python3 ~/Virtual_Environments/ConFindr</code>)</li>
<li>Activate the virtualenv (<code>source ~/Virtual_Environments/ConFindr/bin/activate</code>)</li>
<li>Install ConFindr - this should also install any packages that ConFindr depends on (<code>pip install confindr</code>)</li>
</ul>
<p>With this done, you'll need to make sure that any necessary dependencies are installed.</p>
<h4 id="dependencies">Dependencies</h4>
<p>Before using ConFindr, you'll need to download and add the following programs to your $PATH:</p>
<ul>
<li><a href="https://jgi.doe.gov/data-and-tools/bbtools/">BBTools (&gt;=37.23)</a></li>
<li><a href="https://github.com/marbl/Mash/releases">Mash (&gt;=2.0)</a></li>
<li><a href="https://bitbucket.org/genomicepidemiology/kma">KMA (&gt;=1.2.0)</a></li>
<li><a href="https://www.python.org/downloads/">Python (&gt;=3.5)</a></li>
</ul>
<p>If you want to run in Nanopore mode, you'll also need to get <a href="https://github.com/lh3/minimap2">minimap2</a>.</p>
<p>Instructions on adding programs to your $PATH can be found <a href="https://stackoverflow.com/questions/14637979/how-to-permanently-set-path-on-linux-unix">here</a>.</p>
<p>If ConFindr can't find these dependencies when you try to run it, you will see an error message and the program will quit.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>
        <script src="../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
