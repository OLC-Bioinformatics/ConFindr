<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://olc-bioinformatics.github.io/ConFindr/install/">
        <link rel="shortcut icon" href="../img/favicon.ico">

	<title>Installation - ConFindr</title>

        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <link href="../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="..">ConFindr</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="..">Home</a>
                </li>
            
            
            
                <li class="active">
                    <a href="./">Installation</a>
                </li>
            
            
            
                <li >
                    <a href="../usage/">Usage</a>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li >
                    <a rel="next" href="..">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../usage/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                <li>
                    <a href="https://github.com/OLC-Bioinformatics/Confindr">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#system-requirements">System Requirements</a></li>
        
            <li><a href="#downloading-confindr-databases">Downloading ConFindr Databases</a></li>
        
            <li><a href="#installing-using-conda-recommended">Installing Using Conda (Recommended)</a></li>
        
            <li><a href="#manual-install">Manual Install</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="system-requirements">System Requirements</h1>
<p>ConFindr has been tested with Debian-based Linux systems, 
but should in principle work on any flavour of Linux, as well as MacOSX. 
Windows isn't supported, but it may very well be installable via bioconda. If you have any success running
ConFindr on a Windows machine, let me know!</p>
<p>ConFindr should run on any regular desktop/laptop with 8 GB or RAM or more.</p>
<h2 id="downloading-confindr-databases">Downloading ConFindr Databases</h2>
<p>ConFindr uses the ribsomal multi-locus sequence typing (rMLST) scheme to detect contamination. These databases are 
freely available, but you will need to jump through a few hoops before you can get access to them due to an 
associated <a href="https://pubmlst.org/rmlst/rMLST_licence.pdf">licence agreement</a>.</p>
<p>Here are the steps to getting databases downloaded:</p>
<ul>
<li>
<p>Register for a PubMLST account if you do not already have one. Link to register is <a href="https://pubmlst.org/bigsdb">here</a>. 
Click on <code>Register for a site-wide account.</code></p>
</li>
<li>
<p>Login to your account at <a href="https://pubmlst.org/bigsdb">https://pubmlst.org/bigsdb</a> and request access to 
Ribosomal MLST genome and Ribosomal MLST locus/sequence definitions under <code>Registrations</code>. Additionally, email Keith Jolley
(keith.jolley@zoo.ox.ac.uk) and request a consumer key and consumer secret so that you'll be able
to access the database programatically.</p>
</li>
<li>
<p>Once you've gotten your consumer key and consumer secret from Keith, put them into a text file
with the key on the first line and the secret on the second. It should look something like the below
snippet:</p>
</li>
</ul>
<pre><code>efKXmqp2D0EBlMBkZaGC2lPf
F$M+fQ2AFFB2YBDfF9fpHF^qSWJdmmN%L4Fxf5Gur3
</code></pre>

<ul>
<li>
<p>Install ConFindr as shown in the next section.</p>
</li>
<li>
<p>With ConFindr installed, use the command <code>confindr_database_setup</code> to have ConFindr download the latest version
of the rMLST databases. This script takes two arguments - a <code>-s</code> where you give the path to the text file containing your consumer 
key and secret, and a <code>-o</code> to specify where you want the sequences downloaded. Only the <code>-s</code> is mandatory. If your output
directory is not specified, ConFindr will first search for an environmental variable called <code>CONFINDR_DB</code>, and if it can't
find that it will automatically download to a folder called <code>.confindr_db</code> in your home directory.</p>
</li>
</ul>
<h2 id="installing-using-conda-recommended">Installing Using Conda (Recommended)</h2>
<p>ConFindr is available within bioconda - to get bioconda installed and running see instructions <a href="https://bioconda.github.io/">here</a>.</p>
<p>With bioconda running, you can install ConFindr with the following command:</p>
<p><code>conda install -c bioconda confindr</code></p>
<p>With that done, typing <code>confindr.py</code> will bring access the ConFindr pipeline. See the <a href="../usage/">Usage</a> section for instructions on how to use ConFindr, including a ConFindr run on an example dataset.</p>
<h2 id="manual-install">Manual Install</h2>
<h4 id="executable">Executable</h4>
<p>ConFindr can also be installed using pip. Use of a virtual environment for ConFindr is highly recommended. To create a virtualenv:</p>
<ul>
<li>Create an empty directory (i.e. <code>mkdir ~/Virtual_Environments/ConFindr</code>)</li>
<li>Virtualenv that directory (<code>virtualenv -p /usr/bin/python3 ~/Virtual_Environments/ConFindr</code>)</li>
<li>Activate the virtualenv (<code>source ~/Virtual_Environments/ConFindr/bin/activate</code>)</li>
<li>Install ConFindr - this should also install any packages that ConFindr depends on (<code>pip install confindr</code>)</li>
</ul>
<p>With this done, you'll need to make sure that any necessary dependencies are installed.</p>
<h4 id="dependencies">Dependencies</h4>
<p>Before using ConFindr, you'll need to download and add the following programs to your $PATH:</p>
<ul>
<li><a href="https://jgi.doe.gov/data-and-tools/bbtools/">BBTools (&gt;=37.23)</a></li>
<li><a href="https://github.com/marbl/Mash/releases">Mash (&gt;=2.0)</a></li>
<li><a href="https://bitbucket.org/genomicepidemiology/kma">KMA (&gt;=1.2.0)</a></li>
<li><a href="https://www.python.org/downloads/">Python (&gt;=3.5)</a></li>
</ul>
<p>If you want to run in Nanopore mode, you'll also need to get <a href="https://github.com/lh3/minimap2">minimap2</a>.</p>
<p>Instructions on adding programs to your $PATH can be found <a href="https://stackoverflow.com/questions/14637979/how-to-permanently-set-path-on-linux-unix">here</a>.</p>
<p>If ConFindr can't find these dependencies when you try to run it, you will see an error message and the program will quit.</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            
            <center>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</center>
        </footer>

        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script>
        <script src="../js/base.js"></script>
    </body>
</html>